# 1.MongoDB相关概念

**业务应用场景**

传统的关系型数据库(如MySQL)，在数据操作的“三高”需求以及应对Web2.0的网站需求面前，显的力不从心，而MongoDB可以应对三高需求：

- HIGH performance：对数据库高并发读写的需求
- Huge Storage：对海量数据的高效率存储和访问的需求
- HIGH Scalability && High Availability：对数据库的高可扩展性和高可用性的需求



具体的场景：

1. 社交场景，使用MongoDB存储用户信息，以及用户发表的朋友圈信息，通过地理位置索引实现附近的人、地点等功能
2. 游戏场景，使用MongoDB存储游戏用户信息，用户的装备，积分等直接以内嵌文档的形式存储，方便查询、高效率存储和访问
3. 物流场景，使用MongoDB存储订单信息，订单状态在运送过程中会不断更新，以MongoDB内嵌数组的形式来存储，一次查询就能将订单所有的变更读取出来
4. 物联网场景，使用MongoDB存储所有接入的只能设备信息，以及设备汇报的日志信息，并对这些信息进行多维度的分析
5. 视频直播，使用MongoDB存储用户信息、点赞互动信息等



从以上应用场景中，可以知道MongoDB数据操作方面的共同特点是：

1. 数据量大
2. 写入操作频繁
3. 价值较低的数据，对事物性要求不高



**什么时候选择MongoDB？**

应用不需要事物以及复杂join支持

新应用，需求会变，数据模型无法确定，想快读迭代开发

应用需要2000-3000以上的读写QP5

应用需要TB甚至PB级别数据存储

应用发展迅速，需要能快速水平扩展

应用要求存储的数据不丢失

应用需要99.999%高可用

应用需要大量的地理位置查询、文本查询



# 2.MongoDB简介

MongoDB是一个开源、高性能、无模式的文档型数据库，当初的设计就是用于简化开发和方便扩展，是NoSQL数据库产品中的一种。是最像关系型数据库的非关系型数据库

它支持的数据结构非常松散，是一种类似于JSON的格式叫BSON，所以它既可以存储比较复杂的数据类型，又相当灵活

MongoDB中的记录是一个文档，它是一个由字段和值对组成的数据结构。MongoDB文档类似于JSON对象，即一个文档认为就是一个对象。字段的数据类型是字符串，它的值除了使用基本的一些类型外，还可以包括其他文档、普通数组和文档数组

**体系结构**

MongoDB和MySQL对比

![image-20220905192325454](D:/i/2023/11/19/image-20220905192325454.png)

| SQL术语     | MongoDB术语 | 解释                                 |
| ----------- | ----------- | ------------------------------------ |
| database    | database    | 数据库                               |
| table       | collection  | 数据库表/集合                        |
| row         | document    | 数据库行/文档                        |
| column      | field       | 数据库字段/域                        |
| index       | index       | 索引                                 |
| table joins |             | 表连接，MongoDB不支持                |
|             | 嵌入文档    | MongoDB通过嵌入式文档来替代多表连接  |
| primary key | primary key | 主键，MongoDB自动将_id字段设置为主键 |



**数据模型**

MongoDB的最小存储单位就是文档









































