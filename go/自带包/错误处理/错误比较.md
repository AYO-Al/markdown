åœ¨ Go è¯­è¨€ä¸­ï¼Œå¯¹ `error` ç±»å‹çš„é”™è¯¯æ¯”è¾ƒæœ‰å¤šç§å½¢å¼ï¼Œå…¶ä¸­ä¸€äº›çœ‹ä¼¼ç®€å•ä½†éšè—ç€é™·é˜±ã€‚ä»¥ä¸‹æ˜¯é”™è¯¯æ¯”è¾ƒçš„è¯¦ç»†åˆ†æå’Œå¸¸è§é™·é˜±ï¼š

### ğŸ¯ é”™è¯¯æ¯”è¾ƒçš„ 4 ç§å½¢å¼

#### 1. å¸¸è§„é”™è¯¯æ¯”è¾ƒ (`err == target`)

```
if err == io.EOF {
    // å¤„ç† EOF æƒ…å†µ
}
```

â€‹**â€‹é€‚ç”¨åœºæ™¯â€‹**â€‹ï¼šæ¯”è¾ƒé¢„å®šä¹‰çš„å“¨å…µé”™è¯¯ï¼ˆå…¨å±€å˜é‡ï¼‰

#### 2. ä¸ `nil` æ¯”è¾ƒ (`err == nil`)

```
if err != nil {
    // é”™è¯¯å¤„ç†
}
```

â€‹**â€‹å®‰å…¨åœºæ™¯â€‹**â€‹ï¼šæ£€æŸ¥å‡½æ•°æ˜¯å¦è¿”å›é”™è¯¯

#### 3. `errors.Is()`ï¼ˆæ¨èï¼‰

```
if errors.Is(err, io.EOF) {
    // æ£€æŸ¥é”™è¯¯é“¾ä¸­æ˜¯å¦å­˜åœ¨ç‰¹å®šé”™è¯¯
}
```

â€‹**â€‹é€‚ç”¨åœºæ™¯â€‹**â€‹ï¼šå¤„ç†åŒ…è£…é”™è¯¯ï¼ˆWrapped Errorsï¼‰

#### 4. `errors.As()` ç±»å‹åŒ¹é…

```
var e *os.PathError
if errors.As(err, &e) {
    // å¤„ç†ç‰¹å®šé”™è¯¯ç±»å‹
}
```

â€‹**â€‹é€‚ç”¨åœºæ™¯â€‹**â€‹ï¼šå¤„ç†è‡ªå®šä¹‰é”™è¯¯ç±»å‹

---

### ğŸ§© æœ€å±é™©çš„é”™è¯¯æ¯”è¾ƒé™·é˜±

#### âŒ é™·é˜± 1ï¼šç›´æ¥æ¯”è¾ƒåŠ¨æ€åˆ›å»ºçš„å­—ç¬¦ä¸²é”™è¯¯

```
func ReadConfig() error {
    return fmt.Errorf("config error")
}

// é”™è¯¯çš„æ¯”è¾ƒæ–¹å¼
if err == fmt.Errorf("config error") {
    // æ°¸è¿œä¸ä¼šæ‰§è¡Œï¼ˆæ¯æ¬¡è¿”å›æ–°å®ä¾‹ï¼‰
}
```

â€‹**â€‹åŸå› â€‹**â€‹ï¼š`fmt.Errorf()` æ¯æ¬¡è¿”å›æ–°å®ä¾‹ï¼Œå†…å­˜åœ°å€ä¸åŒ

#### âŒ é™·é˜± 2ï¼šæ¯”è¾ƒè¢«åŒ…è£…çš„é”™è¯¯

```
wrappedErr := fmt.Errorf("ä¸Šä¸‹æ–‡: %w", io.EOF)

// é”™è¯¯æ¯”è¾ƒ
if wrappedErr == io.EOF { 
    // æ°¸è¿œä¸ä¼šæ‰§è¡Œ
}
```

â€‹**â€‹æ­£ç¡®åšæ³•â€‹**â€‹ï¼š

```
if errors.Is(wrappedErr, io.EOF) {
    // æ­£ç¡®åŒ¹é…
}
```

#### âŒ é™·é˜± 3ï¼šå¿½ç•¥è‡ªå®šä¹‰é”™è¯¯çš„ä¸ç›¸ç­‰æ€§

```
type CustomError struct{ Code int }

err1 := CustomError{Code: 404}
err2 := CustomError{Code: 404}

fmt.Println(err1 == err2) // falseï¼ˆç¼–è¯‘é”™è¯¯ï¼‰ âŒ

// åªæœ‰æ·»åŠ æ¯”è¾ƒæ–¹æ³•æ‰å¯ç¼–è¯‘ï¼ˆä½†ä»ä¸å»ºè®®ï¼‰
func (e CustomError) Equal(other CustomError) bool {
    return e.Code == other.Code
}
```

#### âŒ é™·é˜± 4ï¼šé”™è¯¯ä¸æ¥å£å˜é‡æ¯”è¾ƒ

```
var target error = io.EOF
err := io.EOF
fmt.Println(err == target) // true âœ…

var anyInterface interface{} = io.EOF
fmt.Println(err == anyInterface) // true âœ…

// å±é™©æ¯”è¾ƒ
var reader io.Reader = io.EOF
fmt.Println(err == reader) // false âŒ
```

â€‹**â€‹åŸå› â€‹**â€‹ï¼š`io.EOF` å®ç°äº† `error` å’Œ `io.Reader`ï¼Œä½†æ¥å£ç±»å‹ä¸åŒ

---

### âœ… é”™è¯¯å¤„ç†æœ€ä½³å®è·µå¯¹æ¯”

|â€‹**â€‹é”™è¯¯å¤„ç†æ–¹å¼â€‹**â€‹|â€‹**â€‹ä½¿ç”¨åœºæ™¯â€‹**â€‹|â€‹**â€‹ç¤ºä¾‹â€‹**â€‹|â€‹**â€‹æ¨èåº¦â€‹**â€‹|
|---|---|---|---|
|`err == nil`|åŸºç¡€é”™è¯¯æ£€æŸ¥|`if err != nil {...}`|â˜…â˜…â˜…â˜…â˜…|
|`errors.Is()`|åŒ¹é…é”™è¯¯é“¾|`errors.Is(err, io.EOF)`|â˜…â˜…â˜…â˜…â˜…|
|`errors.As()`|ç±»å‹æ–­è¨€|`errors.As(err, &PathError)`|â˜…â˜…â˜…â˜…â˜…|
|`err == target`|é¢„å®šä¹‰å“¨å…µé”™è¯¯|`err == io.EOF`|â˜…â˜…â˜†â˜†â˜†|
|ç›´æ¥æ¯”è¾ƒå­—ç¬¦ä¸²|ä»»æ„åœºæ™¯|`err.Error() == "msg"`|â˜†â˜†â˜†â˜†â˜†|

---

### ğŸ”§ è‡ªå®šä¹‰é”™è¯¯å¤„ç†æ¨¡å¼

#### 1. å®ç° `Is()` æ–¹æ³•ï¼ˆæ”¯æŒé”™è¯¯é“¾ï¼‰

```
type DatabaseError struct { Code int }

func (e DatabaseError) Is(target error) bool {
    t, ok := target.(DatabaseError)
    return ok && e.Code == t.Code
}

func main() {
    err := DatabaseError{Code: 404}
    wrapped := fmt.Errorf("åŒ…è£¹é”™è¯¯: %w", err)
    
    // æ­£ç¡®æ¯”è¾ƒ
    if errors.Is(wrapped, DatabaseError{Code: 404}) {
        fmt.Println("åŒ¹é… 404 é”™è¯¯")
    }
}
```

#### 2. å®ç° `Equal()` æ–¹æ³•ï¼ˆç”¨äºç›´æ¥æ¯”è¾ƒï¼‰

```
func (e DatabaseError) Equal(target DatabaseError) bool {
    return e.Code == target.Code
}

// æ¯”è¾ƒ
err := DatabaseError{Code: 404}
if err.Equal(DatabaseError{Code: 404}) {
    // ç²¾ç¡®æ¯”è¾ƒ
}
```

#### 3. ä½¿ç”¨å¸¸é‡å“¨å…µé”™è¯¯ï¼ˆæœ€å®‰å…¨ï¼‰

```
var ErrNotFound = errors.New("æœªæ‰¾åˆ°èµ„æº")

func main() {
    err := getResource()
    if errors.Is(err, ErrNotFound) {
        // å®‰å…¨å¤„ç†
    }
}
```

---

### ğŸš¨ éœ€è¦è­¦æƒ•çš„æ¯”è¾ƒç»“æœ

|æ¯”è¾ƒè¡¨è¾¾å¼|ç»“æœ|åŸå› |
|---|---|---|
|`fmt.Errorf("A") == fmt.Errorf("A")`|`false`|ä¸åŒå†…å­˜å®ä¾‹|
|`io.EOF == io.EOF`|`true`|å…¨å±€å•å®ä¾‹|
|`errors.New("A") == errors.New("A")`|`false`|ä¸åŒå†…å­˜å®ä¾‹|
|`error(nil) == nil`|`true`|ç±»å‹åŒ¹é…|
|`var e error = nil; e == nil`|`true`|æ¥å£å€¼ä¸º nil|
|`var e error = (*Error)(nil); e == nil`|`false`|éç©ºæ¥å£ç±»å‹|

â€‹**â€‹é»„é‡‘è§„åˆ™â€‹**â€‹ï¼šå¯¹äºé‡è¦çš„é”™è¯¯å¤„ç†ï¼Œâ€‹**â€‹æ€»æ˜¯â€‹**â€‹ä½¿ç”¨ `errors.Is()` æˆ– `errors.As()` ä»£æ›¿ `==` æ“ä½œç¬¦

é€šè¿‡éµå¾ªè¿™äº›åŸåˆ™ï¼Œæ‚¨å¯ä»¥é¿å…å¸¸è§çš„é”™è¯¯æ¯”è¾ƒé™·é˜±ï¼Œç¼–å†™å‡ºæ›´å¥å£®ã€æ›´æ˜“ç»´æŠ¤çš„é”™è¯¯å¤„ç†ä»£ç ã€‚