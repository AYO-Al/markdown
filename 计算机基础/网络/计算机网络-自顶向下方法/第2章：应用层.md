# 通信方式

> 应用之间的通信

- C/S模式
	- 客户端/服务器模式
	- 缺点：可靠性/可扩展性比较差
- P2P模式
	- 每个session都可以是客户端也可以 是服务端
	- 缺点：管理比较困难
- 混合模式
	- 以上两种模式的混合
		- 在每次上线和下线的时候向服务器端发送注册命令，把地址和资源列表进行注册
		- 在客户端请求的时候在服务器进行查询后向资源拥有者发起请求

> 进程之间通信

- 进程：在主机上运行的应用程序
- 在同一主机内，使用进程间通信机制通信
- 不同主机，通过交换报文（message）来通信
	- 使用OS提供的通信服务
	- 按照应用协议交换报文
		- 依靠传输层提供的服务

> 进程间通信(IPC,Inter-Process Communication)需要解决的问题

1. 进程标识和寻址（服务用户）
	1. 标识：进程为了接收报文，必须有一个标识
		1. 主机IP
		2. 所采用的传输层协议
		3. 进程所使用的端口
	2. 一个进程用一个IP+端口标识了一个端节点
	3. 本质上，一对主机上进程进行通信由两个端节点构成
2. 传输层-应用层如何提供服务（服务）
	1. 位置层间界面的SAP（TCP/IP，socket）
	2. 形式：应用程序接口（TCP/IP，socket API）
	3. 应用层提供给传输层的信息：
		1. 哪个进程发的 IP+Port
		2. 发送给谁 IP + Port
		3. 所发送的信息是什么 Message
	4. 传输层实体根据这些信息封装TCP报文段（UDP数据包）
	5. 如果每次socket API传输报文都需要携带如此多的信息，不便于管理且繁琐容错
	6. 用个代号标示通信的双方或单方：socket
	7. 就像OS打开文件返回的句柄一样，对句柄的操作就是对文件的操作
	8. TCP socket
		1. TCP服务：两个进程之间通信前要建立连接，两个连接会持续一段时间，通信关系稳定
		2. 可以用一个整数表示两个应用实体之间的通信关系，本地标识
		3. 穿过层间接口的信息量最小
		4. TCP socket（四元组）：源IP，源端口，目标IP，目标端口
		5. 唯一指定了两个进程之间的会话关系
		6. 简单，便于管理
	9. UDP socket
		1. UDP服务：两个进程通信前不需要建立连接
			1. 每个报文都是独立传输的
		2. 因此只能用一个整数标识本应用实体
		3. 传过层间接口的信息大小最小
		4. UDP socket：本机IP+本应用port
		5. 但是传输报文时必须提供对方的ip+端口
			1. 接收报文时也需要上传ip+端口
3. 如何使用传输层提供的服务，实现应用进程之间的报文交换（用户使用服务）
	1. 定义应用层协议：时序，报文格式/解释，动作控制等
	2. 编写程序：使用OS提供的API，使用网络基础设施提供通信服务传报文，实现应用时序等
# web&http

