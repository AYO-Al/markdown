# MAC地址和ARP

- Lan(MAC/物理/以太网)地址：
	- 用于使帧从一个网卡传递到与其物理连接的另一个网卡
	- 48bit（16进制表示） MAC地址固化在适配器的ROM，有时也可以通过软件设定
	- 理论上全球任何2个网卡的MAC地址都不一样
- IP地址和MAC地址的作用不同
	- IP地址是分层的
		- 一个子网所有站点网络号一致，路由聚集，减少路由表
			- 需要一个网络中的站点地址网络号一致，如果捆绑需要定制网卡非常麻烦
		- 希望网络层地址是配置的：IP地址完成网络到网络的交付
	- mac地址是一个平面
		- 网卡在生产时不知道用于哪个网络，因此给网卡一个唯一的标识，用于区分一个网络内部不同网卡即可
		- 可以完成一个物理网络内部的节点到节点数据交付
- MAC地址由IEEE管理和分配
- 制造商购入MAC地址空间（唯一性）

- 每个LAN上的每个IP节点都有一个ARP表
- ARP表：包括一些LAN节点IP/MAC地址的映射<IP;Mac;TTL>
	- TTL时间指的是地址映射失效的时间
	- 典型是20min

## ARP协议

- A要发送帧给B(B的IP地址已知)，但B的MAC地址不在A的ARP表中
- A广播包含B的IP地址的ARP查询包
	- Dest MAC address = FF-FF-FF-FF
	- LAN上的所有节点都会收到该查询包
- B接收ARP包，回复A自己的MAC地址
	- 帧发送给A
	- 用的AMC地址（单播）
- A在自己的ARP表中，缓存IP-to-MAC地址映射关系，直到信息超时
	- 软状态：靠定期刷新维持的系统状态
	- 定期刷新周期之间维护的状态信息可能和原有系统不一致
- ARP是即插即用的
	- 节点自己创建ARP表项
	- 无需网络管理员的干预
- ARP只为在同一个子网上的主机和路由器接口解析IP地址